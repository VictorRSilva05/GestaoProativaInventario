<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
<script src="~/js/jquery-validation-ptbr.js"></script>

<script type="text/javascript">

    // Sobrescreve o validador 'number' do jQuery para aceitar o formato pt-BR (com vírgula)
    $.validator.methods.number = function(value, element) {
        return this.optional(element) || /^-?(?:\d+|\d{1,3}(?:.\d{3})*)(?:,\d+)?$/.test(value);
    };

    // Sobrescreve o validador 'range' para tratar a vírgula
    $.validator.methods.range = function(value, element, param) {
        if (this.optional(element)) {
            return true;
        }
        // Converte o valor pt-BR (com vírgula) para um número flutuante
        var valueWithDot = value.replace(".", "").replace(",", ".");
        var val = parseFloat(valueWithDot);

        // Converte os parâmetros (min e max)
        var min = parseFloat(param[0]);
        var max = parseFloat(param[1]);

        return val >= min && val <= max;
    };
</script>